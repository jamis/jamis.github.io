(function(){var b,a;a=(function(){c.prototype.N=624;c.prototype.M=397;c.prototype.MATRIX_A=2567483615;c.prototype.UPPER_MASK=2147483648;c.prototype.LOWER_MASK=2147483647;function c(d){this.mt=new Array(this.N);this.setSeed(d)}c.prototype.unsigned32=function(d){if(d<0){return(d^this.UPPER_MASK)+this.UPPER_MASK}else{return d}};c.prototype.subtraction32=function(e,d){if(e<d){return this.unsigned32((4294967296-(d-e))%4294967295)}else{return e-d}};c.prototype.addition32=function(e,d){return this.unsigned32((e+d)&4294967295)};c.prototype.multiplication32=function(g,e){var d,f,h;f=0;for(d=h=0;h<32;d=++h){if((g>>>d)&1){f=this.addition32(f,this.unsigned32(e<<d))}}return f};c.prototype.setSeed=function(d){if(!d||typeof d==="number"){return this.seedWithInteger(d)}else{return this.seedWithArray(d)}};c.prototype.defaultSeed=function(){var d;d=new Date();return d.getMinutes()*60000+d.getSeconds()*1000+d.getMilliseconds()};c.prototype.seedWithInteger=function(e){var d;this.seed=e!=null?e:this.defaultSeed();this.mt[0]=this.unsigned32(this.seed&4294967295);this.mti=1;d=[];while(this.mti<this.N){this.mt[this.mti]=this.addition32(this.multiplication32(1812433253,this.unsigned32(this.mt[this.mti-1]^(this.mt[this.mti-1]>>>30))),this.mti);this.mti[this.mti]=this.unsigned32(this.mt[this.mti]&4294967295);d.push(this.mti++)}return d};c.prototype.seedWithArray=function(h){var g,f,d,e;this.seedWithInteger(19650218);g=1;f=0;d=this.N>h.length?this.N:h.length;while(d>0){e=this.multiplication32(this.unsigned32(this.mt[g-1]^(this.mt[g-1]>>>30)),1664525);this.mt[g]=this.addition32(this.addition32(this.unsigned32(this.mt[g]^e),h[f]),f);this.mt[g]=this.unsigned32(this.mt[g]&4294967295);g++;f++;if(g>=this.N){this.mt[0]=this.mt[this.N-1];g=1}if(f>=h.length){f=0}d--}d=this.N-1;while(d>0){this.mt[g]=this.subtraction32(this.unsigned32(this.mt[g]^this.multiplication32(this.unsigned32(this.mt[g-1]^(this.mt[g-1]>>>30)),1566083941)),g);this.mt[g]=this.unsigned32(this.mt[g]&4294967295);g++;if(g>=this.N){this.mt[0]=this.mt[this.N-1];g=1}}return this.mt[0]=2147483648};c.prototype.nextInteger=function(d){var e,f,g;if((d!=null?d:1)<1){return 0}f=[0,this.MATRIX_A];if(this.mti>=this.N){e=0;while(e<this.N-this.M){g=this.unsigned32((this.mt[e]&this.UPPER_MASK)|(this.mt[e+1]&this.LOWER_MASK));this.mt[e]=this.unsigned32(this.mt[e+this.M]^(g>>>1)^f[g&1]);e++}while(e<this.N-1){g=this.unsigned32((this.mt[e]&this.UPPER_MASK)|(this.mt[e+1]&this.LOWER_MASK));this.mt[e]=this.unsigned32(this.mt[e+this.M-this.N]^(g>>>1)^f[g&1]);e++}g=this.unsigned32((this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK));this.mt[this.N-1]=this.unsigned32(this.mt[this.M-1]^(g>>>1)^f[g&1]);this.mti=0}g=this.mt[this.mti++];g=this.unsigned32(g^(g>>>11));g=this.unsigned32(g^((g<<7)&2636928640));g=this.unsigned32(g^((g<<15)&4022730752));return this.unsigned32(g^(g>>>18))%(d!=null?d:4294967296)};c.prototype.nextFloat=function(){return this.nextInteger()/4294967295};c.prototype.nextBoolean=function(){return this.nextInteger()%2===0};return c})();b=(function(){c.prototype.N=1<<0;c.prototype.S=1<<1;c.prototype.E=1<<2;c.prototype.W=1<<3;function c(g,e,f){var d,h;this.width=g;this.height=e;if(f==null){f={}}this.grid=(function(){var k,j,i;i=[];for(h=k=1,j=this.height;1<=j?k<=j:k>=j;h=1<=j?++k:--k){i.push((function(){var n,l,m;m=[];for(d=n=1,l=this.width;1<=l?n<=l:n>=l;d=1<=l?++n:--n){m.push(0)}return m}).call(this))}return i}).call(this);this.rand=new a(f.seed);this.rand.randomElement=function(i){return i[this.nextInteger(i.length)]};this.rand.shuffleList=function(n){var l,k,m;l=n.length-1;while(l>0){k=this.nextInteger(l+1);m=[n[k],n[l]],n[l]=m[0],n[k]=m[1];l--}return n};this.generate()}c.prototype.mark=function(f,e,d){return this.grid[e][f]|=d};c.prototype.unmark=function(f,e,d){return this.grid[e][f]&=~d};c.prototype.isMarked=function(d,f,e){return(this.grid[e][f]&d)===d};c.prototype.utilities=function(){var d;return d={dx:(function(e){return function(f){switch(f){case e.N:case e.S:return 0;case e.E:return 1;case e.W:return -1}}})(this),dy:(function(e){return function(f){switch(f){case e.E:case e.W:return 0;case e.N:return -1;case e.S:return 1}}})(this),opposite:(function(e){return function(f){switch(f){case e.W:return e.E;case e.E:return e.W;case e.N:return e.S;case e.S:return e.N}}})(this),directions:[this.N,this.S,this.E,this.W]}};c.prototype.generate=function(){var t,r,p,o,q,k,v,u,s,j,n,l,g,w,m,i,h,f,d,e;m=this.utilities(),p=m.dx,o=m.dy,s=m.opposite,r=m.directions;j=[[this.rand.nextInteger(this.width),this.rand.nextInteger(this.height)]];e=[];while(j.length>0){k=this.rand.nextBoolean()?this.rand.nextInteger(j.length):j.length-1;i=j[k],n=i[0],l=i[1];q=false;h=this.rand.shuffleList(r.slice(0));for(g=0,w=h.length;g<w;g++){t=h[g];f=[n+p(t),l+o(t)],v=f[0],u=f[1];if((0<=v&&v<this.width)&&(0<=u&&u<this.height)&&this.grid[u][v]===0){q=true;this.grid[l][n]|=t;this.grid[u][v]|=s(t);j.push([v,u]);break}}if(!q){e.push(([].splice.apply(j,[k,k-k+1].concat(d=[])),d))}else{e.push(void 0)}}return e};c.prototype.thin=function(l){var p,d,m,r,q,k,i,j,o,n,g,h,f,e;h=this.utilities(),r=h.dx,q=h.dy,j=h.opposite,m=h.directions;e=[];for(n=g=0,f=this.height-1;0<=f?g<=f:g>=f;n=0<=f?++g:--g){e.push((function(){var t,u,s;s=[];for(o=t=0,u=this.width-1;0<=u?t<=u:t>=u;o=0<=u?++t:--t){p=this.grid[n][o];if(p===this.N||p===this.S||p===this.E||p===this.W){if(this.rand.nextInteger(100)<l){s.push((function(){var x,v,z,y,w;z=this.rand.shuffleList(m.slice(0));w=[];for(x=0,v=z.length;x<v;x++){d=z[x];if(p===d){continue}y=[o+r(d),n+q(d)],k=y[0],i=y[1];if((0<=k&&k<this.width)&&(0<=i&&i<this.height)){this.grid[n][o]|=d;this.grid[i][k]|=j(d);break}else{w.push(void 0)}}return w}).call(this))}else{s.push(void 0)}}else{s.push(void 0)}}return s}).call(this))}return e};c.prototype.findDistances=function(u,t){var v,r,i,j,q,p,k,l,A,d,z,w,s,o,n,f,e,B,C,m,h,g;m=this.utilities(),q=m.dx,p=m.dy,s=m.opposite,r=m.directions;l=[[u,t]];j=(function(){var D,x,y;y=[];for(n=D=1,x=this.height;1<=x?D<=x:D>=x;n=1<=x?++D:--D){y.push((function(){var F,G,E;E=[];for(o=F=1,G=this.width;1<=G?F<=G:F>=G;o=1<=G?++F:--F){E.push(void 0)}return E}).call(this))}return y}).call(this);j[t][u]=0;A=0;k=null;while(l.length>0){d=[];for(f=0,B=l.length;f<B;f++){h=l[f],o=h[0],n=h[1];i=j[n][o];for(e=0,C=r.length;e<C;e++){v=r[e];if(this.isMarked(v,o,n)){g=[o+q(v),n+p(v)],z=g[0],w=g[1];if(j[w][z]==null){if(i+1>A){A=i+1;k=[z,w]}j[w][z]=i+1;d.push([z,w])}}}}l=d}return[j,A,k]};c.prototype.findLongestPath=function(){var k,m,l,j,i,h,g,f,e,d;g=this.findDistances(0,0),k=g[0],j=g[1],(f=g[2],i=f[0],h=f[1]);e=this.findDistances(i,h),k=e[0],j=e[1],(d=e[2],m=d[0],l=d[1]);return[j,i,h,m,l]};return c})();window.Tremaux=(function(){c.prototype.BACKTRACKED=1<<8;function c(e,f,s){var q,t,h,r,g,d,o,p,n,l,k,m,j,i;this.canvas=document.getElementById(e);this.maze=new b(f,s);this.maze.thin(50);m=this.maze.findLongestPath(),t=m[0],this.startX=m[1],this.startY=m[2],this.endX=m[3],this.endY=m[4];this.dx=this.canvas.width/this.maze.width;this.dy=this.canvas.height/this.maze.height;h=Math.round(this.maze.width*this.dx);q=Math.round(this.maze.height*this.dx);this.walls=[];this.walls.push([0,0,h,0]);this.walls.push([0,0,0,q]);this.walls.push([0,q,h,q]);this.walls.push([h,0,h,q]);for(o=l=0,j=this.maze.height-1;0<=j?l<=j:l>=j;o=0<=j?++l:--l){for(r=k=0,i=this.maze.width-1;0<=i?k<=i:k>=i;r=0<=i?++k:--k){g=Math.round(r*this.dx);p=Math.round(o*this.dy);d=Math.round((r+1)*this.dx);n=Math.round((o+1)*this.dy);if(r+1<this.maze.width&&!this.maze.isMarked(this.maze.E,r,o)){this.walls.push([d,p,d,n])}if(o+1<this.maze.height&&!this.maze.isMarked(this.maze.S,r,o)){this.walls.push([g,n,d,n])}if(r===this.startX&&o===this.startY){this.startCell=[g+2,p+2,Math.round(this.dx)-4,Math.round(this.dy)-4]}if(r===this.endX&&o===this.endY){this.endCell=[g+2,p+2,Math.round(this.dx)-4,Math.round(this.dy)-4]}}}this.resetVisitations()}c.prototype.resetVisitations=function(){var e,j,h,f,g,d,i;for(j=h=0,g=this.maze.height-1;0<=g?h<=g:h>=g;j=0<=g?++h:--h){for(e=f=0,d=this.maze.width-1;0<=d?f<=d:f>=d;e=0<=d?++f:--f){this.maze.unmark(e,j,this.BACKTRACKED)}}i=[this.startX,this.startY],this.positionX=i[0],this.positionY=i[1];this.visits=(function(){var l,m,k;k=[];for(j=l=1,m=this.maze.height;1<=m?l<=m:l>=m;j=1<=m?++l:--l){k.push((function(){var o,p,n;n=[];for(e=o=1,p=this.maze.width;1<=p?o<=p:o>=p;e=1<=p?++o:--o){n.push(void 0)}return n}).call(this))}return k}).call(this);return this.visits[this.positionY][this.positionX]=0};c.prototype.solve=function(d){if(this.timer==null){this.resetVisitations();return this.timer=window.setInterval(((function(e){return function(){return e.update()}})(this)),1000/d)}};c.prototype.update=function(){var r,q,p,n,m,l,t,s,o,d,g,u,k,j,i,h,f,e;d=this.visits[this.positionY][this.positionX];k=this.maze.utilities(),m=k.dx,l=k.dy,o=k.opposite,n=k.directions;r=q=void 0;j=this.maze.rand.shuffleList(n.slice(0));for(g=0,u=j.length;g<u;g++){p=j[g];if(!this.maze.isMarked(p,this.positionX,this.positionY)){continue}i=[this.positionX+m(p),this.positionY+l(p)],t=i[0],s=i[1];if(this.visits[s][t]==null){h=[t,s],r=h[0],q=h[1];break}else{if((r==null)&&this.visits[s][t]===d-1){f=[t,s],r=f[0],q=f[1]}}}if(this.visits[q][r]===d-1){this.maze.mark(this.positionX,this.positionY,this.BACKTRACKED)}else{this.visits[q][r]=d+1}e=[r,q],this.positionX=e[0],this.positionY=e[1];if(this.positionX===this.endX&&this.positionY===this.endY){window.clearInterval(this.timer);this.timer=null}return this.render()};c.prototype.render=function(){var r,q,e,d,m,p,n,k,j,h,o,l,i,g,f;this.canvas.width=this.canvas.width;r=this.canvas.getContext("2d");for(m=k=0,l=this.maze.height-1;0<=l?k<=l:k>=l;m=0<=l?++k:--k){for(q=j=0,i=this.maze.width-1;0<=i?j<=i:j>=i;q=0<=i?++j:--j){if(this.visits[m][q]==null){continue}if(this.maze.isMarked(this.BACKTRACKED,q,m)){r.fillStyle="#aaaaaa"}else{r.fillStyle="#ffffaa"}e=Math.round(q*this.dx);p=Math.round(m*this.dy);r.fillRect(e,p,Math.round(this.dx),Math.round(this.dy))}}r.fillStyle="red";r.fillRect(this.startCell[0],this.startCell[1],this.startCell[2],this.startCell[3]);r.fillStyle="green";r.fillRect(this.endCell[0],this.endCell[1],this.endCell[2],this.endCell[3]);r.beginPath();g=this.walls;for(h=0,o=g.length;h<o;h++){f=g[h],e=f[0],p=f[1],d=f[2],n=f[3];r.moveTo(e,p);r.lineTo(d,n)}return r.stroke()};return c})();window.generateTremaux=function(f){var d,c,e;d=document.getElementById(f);if(((e=d.tremaux)!=null?e.timer:void 0)!=null){window.clearInterval(d.tremaux.timer)}c=new Tremaux(f,20,20);c.render();return d.tremaux=c};window.solveTremaux=function(e){var d,c;d=document.getElementById(e);c=d.tremaux;return c.solve(50)}}).call(this);